<div class="box">
  <div class="row box-level">

    <mat-form-field appearance="outline" class="item">
      <mat-label>Cấp</mat-label>
      <mat-select (valueChange)="onChangedLevel($event)" [(ngModel)]="currentLevelId">
        <mat-option *ngFor="let level of levels" [value]="level.levelId">
          {{ level.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="item" appearance="outline" >
      <mat-label>Tên đề</mat-label>
      <input type="text" matInput  [(ngModel)]="inputTopicName" />
    </mat-form-field>

    <button mat-raised-button color="primary" [disabled]="inputTopicName.length<=0" (click)="addTopic()" class="item">Thêm
      đề</button>
    <button mat-raised-button color="primary" [disabled]="!canDelTopic" (click)="deleteTopic()" class="item">Xoá
      đề</button>
  </div>
  <div class=" row py-1">
    <mat-tab-group mat-align-tabs="start"  (selectedTabChange)="topicChanged($event)" >
      <div *ngIf="topics">
        <mat-tab [label]="topic.name" [aria-label]="topic.topicId" *ngFor="let topic of topics;">
          <div *ngIf="questions">
            <div class="question" *ngFor="let question of questions;let i =index;">
              <div class="question-info">
                <mat-expansion-panel hideToggle>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      Câu {{i+1}} : {{question.question}}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <p class="answer" *ngFor="let answer of question.answers;let j = index;"> {{answer.name}}
                    <mat-icon color="primary" *ngIf="answer.status===true">check_circle</mat-icon>
                  </p>
                </mat-expansion-panel>
              </div>
              <div class="question-btn">
                <button mat-raised-button color="primary" [routerLink]="['edit',question.questionId]">Sửa</button>
                <button mat-raised-button color="warn" (click)="deleteQuestion(question.questionId)">Xoá</button>
              </div>
            </div>
          </div>
          <button mat-raised-button class="mt-2" color="primary" [routerLink]="['new',topic.topicId]">Thêm</button>
        </mat-tab>
      </div>
    </mat-tab-group>
  </div>
</div>